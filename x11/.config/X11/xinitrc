#!/bin/sh

export XDG_SESSION_TYPE="x11"

[ -f "$HOME/.config/X11/xresources" ] && xrdb -load "$HOME/.config/X11/xresources"

# For the nvidia people
xrandr --setprovideroutputsource modesetting NVIDIA-0

setxkbmap -option caps:escape &
xset s off -dpms &
xset r rate 200 50 &

[ -f "$HOME/.config/X11/xmodmap" ] && xmodmap "$HOME/.config/X11/xmodmap"

for p in numlockx rshift dunst mpd mpdscribble; do
  pidof -s "$p" || "$p" &
done

session="${1:-i3}"

case "$session" in
  i3)       exec i3;;
  bspwm)    exec bspwm;;
  xfce)     exec startxfce4;;
  cinnamon) exec cinnamon-session;;
  awesome)  exec awesome;;
  dwm)
    setmonitor &
    dwmblocks &
    exec dwm;;
  *)      exec "$1";;
esac
